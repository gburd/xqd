#!/bin/sh
#
# dbxmld-rotate - nightly script to rotate dbxmld's log files on FreeBSD
#
# This goes in /etc/periodic/daily.  It rotates the log files and then
# tells dbxmld to re-open its log file.

cd /usr/local/www/chroot/logs
rm -f dbxmld_log.7
mv dbxmld_log.6 dbxmld_log.7
mv dbxmld_log.5 dbxmld_log.6
mv dbxmld_log.4 dbxmld_log.5
mv dbxmld_log.3 dbxmld_log.4
mv dbxmld_log.2 dbxmld_log.3
mv dbxmld_log.1 dbxmld_log.2
mv dbxmld_log dbxmld_log.1
kill -HUP `cat /var/run/dbxmld.pid`
